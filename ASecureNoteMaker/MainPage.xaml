<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
            xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
            x:Class="ASecureNoteMaker.MainPage" 
            Title="A Secure Note Maker"
            BackgroundColor="#f5f7fa">

   <!-- App Resources -->
   <ContentPage.Resources>
       <ResourceDictionary>
           <!-- Colors -->
           <Color x:Key="PrimaryColor">#4f46e5</Color>
           <Color x:Key="PrimaryVariantColor">#3730a3</Color>
           <Color x:Key="AccentColor">#f59e0b</Color>
           <Color x:Key="BackgroundColor">#f5f7fa</Color>
           <Color x:Key="SurfaceColor">#ffffff</Color>
           <Color x:Key="TextPrimaryColor">#1e293b</Color>
           <Color x:Key="TextSecondaryColor">#64748b</Color>
           <Color x:Key="BorderColor">#e2e8f0</Color>

           <!-- Button Styles -->
           <Style x:Key="PrimaryButton" TargetType="Button">
               <Setter Property="BackgroundColor" Value="{StaticResource PrimaryColor}" />
               <Setter Property="TextColor" Value="White" />
               <Setter Property="FontAttributes" Value="Bold" />
               <Setter Property="CornerRadius" Value="8" />
               <Setter Property="Padding" Value="16,8" />
               <Setter Property="MinimumHeightRequest" Value="48" />
               <Setter Property="VisualStateManager.VisualStateGroups">
                   <VisualStateGroupList>
                       <VisualStateGroup x:Name="CommonStates">
                           <VisualState x:Name="Normal" />
                           <VisualState x:Name="Pressed">
                               <VisualState.Setters>
                                   <Setter Property="BackgroundColor" Value="{StaticResource PrimaryVariantColor}" />
                                   <Setter Property="Scale" Value="0.98" />
                               </VisualState.Setters>
                           </VisualState>
                       </VisualStateGroup>
                   </VisualStateGroupList>
               </Setter>
           </Style>

           <!-- Secondary Button Style -->
           <Style x:Key="SecondaryButton" TargetType="Button">
               <Setter Property="BackgroundColor" Value="Transparent" />
               <Setter Property="TextColor" Value="{StaticResource PrimaryColor}" />
               <Setter Property="BorderColor" Value="{StaticResource PrimaryColor}" />
               <Setter Property="BorderWidth" Value="1" />
               <Setter Property="CornerRadius" Value="8" />
               <Setter Property="Padding" Value="16,8" />
               <Setter Property="MinimumHeightRequest" Value="48" />
           </Style>

           <!-- Frame Style -->
           <Style x:Key="CardFrame" TargetType="Frame">
               <Setter Property="BorderColor" Value="{StaticResource BorderColor}" />
               <Setter Property="BackgroundColor" Value="{StaticResource SurfaceColor}" />
               <Setter Property="CornerRadius" Value="12" />
               <Setter Property="HasShadow" Value="True" />
               <Setter Property="Padding" Value="16" />
           </Style>
       </ResourceDictionary>
   </ContentPage.Resources>

   <!-- Menu Bar -->
   <ContentPage.MenuBarItems>
       <MenuBarItem Text="File">
           <MenuFlyoutItem Text="New File"
                         Clicked="NewFile_Clicked" />
           <MenuFlyoutItem Text="Open File"
                         Clicked="OpenFile_Clicked" />
           <MenuFlyoutSubItem x:Name="Historymnu" Text="History" BindingContext="{Binding HistoryObject}">
           </MenuFlyoutSubItem>
           <MenuFlyoutItem Text="Exit"
                         Clicked="Exit_Clicked" />
       </MenuBarItem>
       <MenuBarItem Text="Options">
           <MenuFlyoutItem Text="Settings"
                         Clicked="Settings_Clicked" />
       </MenuBarItem>
   </ContentPage.MenuBarItems>

   <!-- Main Layout -->
   <Grid RowDefinitions="Auto, *, Auto" 
         RowSpacing="20" 
         Padding="20" 
         BackgroundColor="{StaticResource BackgroundColor}">

       <!-- Header Section -->
       <Frame Grid.Row="0" 
              Style="{StaticResource CardFrame}"
              Margin="0,0,0,10">
           <Grid ColumnDefinitions="*, Auto">
               <!-- Document Info -->
               <VerticalStackLayout Grid.Column="0" Spacing="4">
                   <Label Text="Current Document" 
                          TextColor="{StaticResource TextSecondaryColor}" 
                          FontSize="14"/>
                   <Label x:Name="lblFileName" 
                          Text="Untitled Document" 
                          FontSize="18" 
                          FontAttributes="Bold"
                          TextColor="{StaticResource TextPrimaryColor}"/>
               </VerticalStackLayout>

               <!-- Save Controls -->
               <HorizontalStackLayout Grid.Column="1" 
                                      Spacing="16" 
                                      VerticalOptions="Center">
                   <HorizontalStackLayout Spacing="8" VerticalOptions="Center">
                       <CheckBox x:Name="AutoSaveCheckbox"
                                 Color="{StaticResource PrimaryColor}"
                                 CheckedChanged="AutoSave_CheckedChanged"/>
                       <Label Text="AutoSave"
                              VerticalOptions="Center"
                              TextColor="{StaticResource TextPrimaryColor}"
                              FontSize="15"/>
                   </HorizontalStackLayout>

                   <Button Text="Save"
                           Style="{StaticResource PrimaryButton}"
                           Clicked="SaveText_Clicked"
                           HorizontalOptions="End">
                       <Button.Shadow>
                           <Shadow Brush="{StaticResource PrimaryColor}"
                                   Offset="0,2"
                                   Radius="4"
                                   Opacity="0.3"/>
                       </Button.Shadow>
                   </Button>
               </HorizontalStackLayout>
           </Grid>
       </Frame>

       <!-- Editor Section -->
       <Frame Grid.Row="1"
              Style="{StaticResource CardFrame}">
           <Grid RowDefinitions="Auto, *">
               <!-- Editor Toolbar -->
               <HorizontalStackLayout Grid.Row="0" 
                                      Spacing="10"
                                      Margin="0,0,0,10"
                                      HorizontalOptions="Start">
                   <Label Text="Secure Note"
                          TextColor="{StaticResource TextPrimaryColor}"
                          FontSize="16"
                          FontAttributes="Bold"
                          VerticalOptions="Center"/>
                   <BoxView Color="{StaticResource BorderColor}"
                            WidthRequest="1"
                            HeightRequest="20"
                            VerticalOptions="Center"/>
                   <Label Text="Protected"
                          TextColor="{StaticResource AccentColor}"
                          FontSize="14"
                          VerticalOptions="Center">
                       <Label.Shadow>
                           <Shadow Brush="{StaticResource AccentColor}"
                                   Offset="0,0"
                                   Radius="8"
                                   Opacity="0.2"/>
                       </Label.Shadow>
                   </Label>
               </HorizontalStackLayout>

               <!-- Editor -->
               <Frame Grid.Row="1"
                      BorderColor="{StaticResource BorderColor}"
                      CornerRadius="8"
                      Padding="12"
                      HasShadow="False"
                      BackgroundColor="#fafafa">
                   <ScrollView VerticalScrollBarVisibility="Always">
                       <Editor x:Name="Note"
                               Placeholder="Type your secure note here..."
                               PlaceholderColor="#94a3b8"
                               FontSize="16"
                               TextColor="{StaticResource TextPrimaryColor}"
                               Text=""
                               IsSpellCheckEnabled="True"
                               IsTextPredictionEnabled="True"
                               BackgroundColor="Transparent"
                               AutoSize="TextChanges"/>
                   </ScrollView>
               </Frame>
           </Grid>
       </Frame>

       <!-- Status Bar -->
       <Border Grid.Row="2"
               StrokeShape="RoundRectangle 8"
               StrokeThickness="1"
               Stroke="{StaticResource BorderColor}"
               BackgroundColor="{StaticResource SurfaceColor}"
               Padding="16,10">
           <Grid ColumnDefinitions="Auto, *, Auto">
               <Image Grid.Column="0"
                      Source="lock.png"
                      WidthRequest="18"
                      HeightRequest="18"
                      VerticalOptions="Center"/>

               <Label Grid.Column="1"
                      x:Name="MainPageStatus"
                      Text="Ready to edit"
                      TextColor="{StaticResource TextSecondaryColor}"
                      FontSize="14"
                      Margin="8,0,0,0"
                      VerticalOptions="Center"/>

               <Label Grid.Column="2"
                      x:Name="LastSavedTime"
                      Text=""
                      TextColor="{StaticResource TextSecondaryColor}"
                      FontSize="13"
                      HorizontalOptions="End"
                      VerticalOptions="Center"/>
           </Grid>
       </Border>
   </Grid>
</ContentPage>